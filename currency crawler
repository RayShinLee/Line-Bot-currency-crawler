# 引用pyquery
from pyquery import PyQuery

# 透過PyQuery擷取網頁原始碼
html = PyQuery('https://rate.bot.com.tw/xrt?Lang=zh-TW')

# 把貨幣名稱取得並整理成list的格式
currency_names = html('div.hidden-phone').text().split()
# 取得貨幣買價
currency_bids = html('td.rate-content-cash[data-table="本行現金買入"]').text().split()
# 取得貨幣賣價
currency_offers = html('td.rate-content-cash[data-table="本行現金賣出"]').text().split()

# 把取得的資料整理成dict
currency = {}

# 建立價格的索引
price_idx = 0

for idx, name in enumerate(currency_names):
  # 如果索引位置是偶數才使用
  if idx % 2 == 0:
    currency[name] = {
        "bids": currency_bids[price_idx],
        "offers": currency_offers[price_idx]
    }
    # 把價格的索引+1供下一個貨幣使用
    price_idx += 1
    
print(currency)
